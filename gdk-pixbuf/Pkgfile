# Description: Image loading library for GTK+
# URL:         https://wiki.gnome.org/Projects/GdkPixbuf
# Depends on:  gobject-introspection libpng libtiff shared-mime-info

name=gdk-pixbuf
version=2.42.4
release=1
source=(http://download.gnome.org/sources/$name/${version:0:4}/$name-$version.tar.xz
	gdk-pixbuf.loaders gdk-pixbuf-register.sh)

build() {
	meson setup build $name-$version \
		--prefix=/usr            \
		--buildtype=plain        \
		-D installed_tests=false \
		-D man=false             \

	meson compile -C build -j ${JOBS:-1} -v
	DESTDIR=$PKG meson install  -C build

	install -m 644 $SRC/gdk-pixbuf.loaders \
		$PKG/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache

	install -m 755 $SRC/gdk-pixbuf-register.sh \
		$PKG/usr/bin/gdk-pixbuf-register

	rm -r $PKG/usr/share/locale
}
