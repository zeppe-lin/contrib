# Description: RSS/Atom feed reader for text terminals
# URL:         http://www.newsboat.org/
# Depends on:  json-c libidn2 libxml2 rtmpdump sqlite3 stfl zstd

name=newsboat
version=2.13
release=1
source=(https://newsboat.org/releases/$version/$name-$version.tar.xz
	newsboat.1.gz podboat.1.gz)

build () {
	cd $name-$version
	
	# fix build with json-c 0.14
	sed -e 's/TRUE/1/' -e 's/FALSE/0/' -i src/newsblur_api.cpp

	# remove unwanted flags
	sed -i '23s/-O2 -ggdb//' Makefile

	export prefix=/usr
	./config.sh
	make newsboat podboat

	install -d $PKG/usr/{bin,share/man/man1}
	install -m 0755 newsboat podboat $PKG/usr/bin
	install -m 0644 $SRC/*.1.gz $PKG/usr/share/man/man1
}
